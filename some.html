<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>VC</title>
  </head>
  <body>
    <div class="vc-cnt">
      <table>
        <tr>
          <th>hours</th>
          <th>22.02.2017</th>
          <th>23.02.2017</th>
          <th>27.02.2017</th>
        </tr>
        <tr>
          <td>08:00</td>
          <td></td>
          <td></td>
          <td>occuped</td>
        </tr>
        <tr>
          <td>10:00</td>
          <td></td>
          <td>cours</td>
          <td></td>
        </tr>
        <tr>
          <td>14:00</td>
          <td>occuped</td>
          <td></td>
          <td></td>
        </tr>
        <tr>
          <td>16:00</td>
          <td>occuped</td>
          <td></td>
          <td>event</td>
        </tr>
      </table>
    </div>
    <style media="screen">
    .vc-cnt {
  box-sizing: border-box;
  width: 100%;
  overflow: auto;
  font-family: Arial,sans-serif;
  position: relative;
}

table {
  width: 100%;
  text-align: center;
  border-collapse: collapse;
  box-sizing: border-box;
}

td,th {
  border: 1px solid black;
  box-sizing: border-box;
}

th {
  background-color: #999;
  color: #eee;
}

tr>td:nth-child(1) {
  color: #5a5a5a;
  font-size: 10px;
  vertical-align: top;
}

tr>td {
  border-bottom-color: #ccc;
}

tr:last-child>td {
  border-bottom-color: black;
}

tr>th:first-child,tr>td:first-child {
    min-width: 70px;
    max-width: 70px;
    width: 70px;
}
    </style>
    <script type="text/javascript">
      Element.parseHTML=function(a,b){if(a instanceof Element)return a;var c=document.createElement('div');if('string'==typeof a){if('<'==a.trim()[0])return c.innerHTML=a,doc=c.children,b?doc:1==doc.length?doc[0]:doc;c.textContent=a;var d=c.firstChild;return b?[d]:d}return c.innerHTML='<![CDATA['+JSON.stringify(a)+']]>',b?[c.firstChild]:c.firstChild},Element.prototype.select=function(a){return this.querySelector(a)},Element.prototype.selects=function(a){return this.querySelectorAll(a)},Element.prototype.parent=function(){return this.parentNode},Element.prototype.prev=function(){return this.previousSibling},Element.prototype.next=function(){return this.nextSibling},Element.prototype.prependx=function(a,b){b||(a=this.constructor.parseHTML(a,!0));var c=a.length,d=this.firstChild;null===d&&this.appendChild(a[0]);for(var e=0;e<c;e++)this.insertBefore(a[0],this.firstChild);return this.firstChild},Element.prototype.appendx=function(a,b){b||(a=this.constructor.parseHTML(a,!0));for(var c=a.length,d=0;d<c;d++)this.appendChild(a[0]);return this.lastChild},Element.prototype.addBefore=function(a,b){b||(a=this.constructor.parseHTML(a,!0));for(var c=this.parentNode,d=a.length,e=0;e<d;e++)c.insertBefore(a[0],this);return this.previousSibling},Element.prototype.addAfter=function(a,b){b||(a=this.constructor.parseHTML(a,!0));var c=this.nextSibling,d=this.parentNode;null===c&&(d.appendChild(a[0]),c=this.nextSibling);for(var e=a.length,f=0;f<e;f++)d.insertBefore(a[0],c);return this.nextSibling},Element.prototype.remove=function(){return this.parentNode.removeChild(this),this},Element.prototype.on=function(a,b){return this.addEventListener(a,b)},Element.prototype.off=function(a,b){return this.removeEventListener(a,b),this};
    </script>
    <script type="text/javascript">

      // TODO dans la classe de base, ajouter la fonction dateHasEvent(date)


      function generate(data){
        let cnt=Element.parseHTML('<div class="vc-cnt"></div>');
        cnt.appendx('<table></table>');

        let header=Element.parseHTML('<tr></tr>');
        header.appendx('<th>hours</th>');
        for(let i=0; i<data.days.length;i++){ // NB appel a DATA
          header.appendx('<th>'+data.days[i]+'</th>');
        }
        let table = cnt.select('table');
        table.appendx(header);
        for(let i=0; i<data.hours.length; i++){ // NB appel a DATA
          let row=Element.parseHTML('<tr></tr>');
          row.appendx('<td>'+data.hours[i]+'</td>');
          for(let j=0; j<data.days.length;j++){ // NB appel a DATA
            let me = dateHasEvent(new Date(data.days[j]+' '+data.hours[i]));
            let selectable =(data.readonly)?'':'selectable ';
            let className=((me)?selectable+me.type:((data.readonly)?'':'clickable'));
            row.appendx('<td class="'+className+'">'+me.text+'</td>')

          }
          table.appendx(row);
        }
      }
    </script>
  </body>
</html>
